!function(){"use strict";const e=[];let t,n;function o(o){function l(c){if(0===arguments.length)return t&&!l.o.has(t)&&(l.o.add(t),t.u.push(l)),o;if(n)return l.t===e&&n.push(l),l.t=c,c;o=c;const i=t;return t=void 0,l.i=new Set(l.o),l.i.forEach(e=>e.s=!1),l.i.forEach(e=>{e.s||e()}),t=i,o}return l.$o=!0,l.o=new Set,l.t=e,l}function l(e,n){function o(){const l=t;t&&t.__c.push(o);const r=o.__c;return i(o),o.s=!0,t=o,n=e(n),r.forEach(e=>{-1===o.__c.indexOf(e)&&(e.s=!0)}),function e(t){return t.reduce((t,n)=>t.concat(n,e(n.__c)),[])}(o.__c).forEach(c),t=l,n}function l(){return o.s?o.u.forEach(e=>e()):n=o(),n}return e.v=o,r(o),o(),l.$o=!0,l}function c(e){e.s&&e.u.forEach(t=>{t.i&&t.i.delete(e)})}function i(e){e.__c.forEach(i),e.u.forEach(t=>{t.o.delete(e),t.i&&t.i.delete(e)}),e.S.forEach(e=>e()),r(e)}function r(e){e.u=[],e.__c=[],e.S=[]}var s=Object.freeze({__proto__:null,S:l,cleanup:function(e){return t&&t.S.push(e),e},computed:l,isListening:function(){return!!t},o:o,observable:o,root:function(e){const n=t,o=()=>{};t=o,r(o);const l=e(()=>{i(o),t=void 0});return t=n,l},sample:function(e){const n=t;t=void 0;const o=e();return t=n,o},subscribe:function(e){return l(e),()=>i(e.v)},transaction:function(t){n=[];const o=t();let l=n;return n=void 0,l.forEach(t=>{if(t.t!==e){const n=t.t;t.t=e,t(n)}}),o},unsubscribe:function(e){i(e.v)}});const u={},a=[],f="__g";let d=0;function p(e,t,n){let o;return"string"==typeof t?t=document.createTextNode(t):t instanceof Node||(t=u.h(a,t)),11===t.nodeType&&(o=t.firstChild)&&o!==t.lastChild&&(o[f]=t.lastChild[f]=++d),e.insertBefore(t,n||null),o||t}function h(e,t,n,o,l){return e=n&&n.parentNode||e,t===o||(o&&"string"!=typeof o||!("string"==typeof t||"number"==typeof t&&(t+=""))?"function"==typeof t?u.subscribe(function(){o=u.insert(e,t(),n,o)}):(function(e,t,n,l){if(n){if(o){if(!l){const t=(l=n.previousSibling||e.lastChild)[f];if(t)for(l=l.previousSibling;l&&l[f]!==t;)l=l.previousSibling}let t;for(;l&&l!==n;)t=l.nextSibling,e.removeChild(l),l[f]=0,l=t}}else e.textContent=""}(e,0,n,l),o=null,t&&!0!==t&&(o=p(e,t,n))):(null!=o&&e.firstChild?n?(n.previousSibling||e.lastChild).data=t:e.firstChild.data=t:n?p(e,t,n):e.textContent=t,o=t)),o}function m(e,t,n,o,l){if(!e||"attrs"===e&&(o=!0))for(e in t)u.property(e,t[e],n,o,l);else"o"!==e[0]||"n"!==e[1]||t.$o?"function"==typeof t?u.subscribe(function(){u.property(e,t(),n,o,l)}):l?n.style.setProperty(e,t):o||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5)?n.setAttribute(e,t):"style"===e?"string"==typeof t?n.style.cssText=t:u.property(null,t,n,o,!0):("class"===e&&(e+="Name"),n[e]=t):function(e,t,n){t=t.slice(2);const o=u.cleanup(()=>e.removeEventListener(t,g));n?e.addEventListener(t,g):o(),(e.t||(e.t={}))[t]=n}(n,e,t)}function g(e){return this.t[e.type](e)}function v(e,t){for(let t in e)u[t]=e[t];function n(){const e=a.slice.call(arguments);let n;return e.forEach(function o(l){if(null==l);else if("string"==typeof l)n?p(n,l):n=t?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l);else if(Array.isArray(l))n||(n=document.createDocumentFragment()),l.forEach(o);else if(l instanceof Node)n?p(n,l):n=l;else if("object"==typeof l)u.property(null,l,n,t);else if("function"==typeof l)if(n){const e=p(n,"");u.insert(n,l,e)}else n=l.apply(null,e.splice(1));else p(n,""+l)}),n}return u.insert=h,u.property=m,u.h=n,u.add=p,n}const y=v(s),b=(v(s,!0),o),S=[];function _(e,t){const{subscribe:n,root:o,cleanup:l}=u;let c=document.createDocumentFragment();const i=c.appendChild(document.createTextNode("")),r=c.appendChild(document.createTextNode("")),s=new Map;function a(e){let t=s.get(e);t&&t(),s.delete(e)}return l(n(n=>{n=n||[];const l=e()||[],u=new Map,f=new Map;let d,p;c=r.parentNode;const h=S.slice.call(c.childNodes),m=S.indexOf.call(h,i),g=S.indexOf.call(h,r);for(d=0;d<n.length;d++)u.set(n[d],d);for(d=0;d<l.length;d++)f.set(l[d],d);for(d=p=0;d!==n.length||p!==l.length;){const e=n[d],t=l[p];if(null===e)d++;else if(l.length<=p)a(c.removeChild(v(d))),d++;else if(n.length<=d)c.insertBefore(y(t,p),v(d)||r),p++;else if(e===t)d++,p++;else{const o=f.get(e),l=u.get(t);void 0===o?(a(c.removeChild(v(d))),d++):void 0===l?(c.insertBefore(y(t,p),v(d)||r),p++):(c.insertBefore(v(l),v(d)||r),n[l]=null,p++)}}function v(e){const t=m+e+1;return t>m&&t<g&&h[t]}function y(e,n){return o(o=>(e=(e=t(e,n))instanceof Node?e:document.createTextNode(e),s.set(e,o),e))}return l.slice()})),l(function(){s.forEach(e=>e()),s.clear()}),c}const C=(e,t=!1,n=Date.now())=>({id:n,title:k(b(e)),completed:k(b(t))}),E=(e=>({todos:k(b(e))}))([]),N=localStorage.getItem("todos-sinuous");function k(e){return e.toJSON=w,e}function w(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}N&&E.todos(JSON.parse(N).todos.map(e=>C(e.title,e.completed,e.id))),l(()=>localStorage.setItem("todos-sinuous",JSON.stringify(E)));const x=27,O=13,{todos:T}=E,A=b(),J=b("all"),B=()=>T().filter(e=>e.completed()),L=()=>T().filter(e=>!e.completed()),M=()=>"all"===J()?T():"completed"===J()?B():L(),D=()=>T(T().filter(e=>!e.completed()));function F(e){const t=e.target.checked;T().filter(e=>e.completed()!==t).forEach(e=>e.completed(t))}function $({target:e,keyCode:t}){let n=e.value.trim();t===O&&n&&(T(T().concat(C(n))),e.value="")}function j(e,t){let n=e.target.value.trim();A()===t&&n&&(I({id:t,title:n}),A(null))}function I({id:e,title:t,completed:n}){const o=T().filter(t=>t.id===e)[0];t&&o.title(t),null!=n&&o.completed(n)}function q(e){var t,n="";for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const z=()=>J(location.hash.slice(2)||"all");window.addEventListener("hashchange",z),z(),document.querySelector(".todoapp").append((()=>y([y("header",{class:"header"},y("h1",null,"todos"),y("input",{class:"new-todo",placeholder:"What needs to be done?",onkeyup:$,autofocus:!0})),y("section",{class:"main",hidden:()=>!T().length},y("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",oninput:F,checked:()=>!L().length}),y("label",{htmlFor:"toggle-all"},"Mark all as complete"),y("ul",{class:"todo-list"},_(M,({id:e,title:t,completed:n})=>y("li",{class:()=>q({completed:n(),editing:A()===e})},y("div",{class:"view"},y("input",{class:"toggle",type:"checkbox",checked:n,oninput:t=>(function(e,t){I({id:t,completed:e.target.checked})})(t,e)}),y("label",{ondblclick:()=>A(e)},t),y("button",{class:"destroy",onclick:()=>(function(e){return T(T().filter(t=>t.id!==e))})(e)})),()=>A()===e&&function(e){return setTimeout(()=>e.focus()),e}(y("input",{class:"edit",value:t,onfocusout:t=>j(t,e),onkeyup:t=>(function(e,t){e.keyCode===O?j(e,t):e.keyCode===x&&A(null)})(t,e)}))))),y("footer",{class:"footer"},y("span",{class:"todo-count"},y("strong",null,()=>L().length),()=>1===L().length?" item":" items"," left"),y("ul",{class:"filters"},y("li",null,y("a",{class:()=>q({selected:"all"===J()}),href:"#/"},"All")),y("li",null,y("a",{class:()=>q({selected:"active"===J()}),href:"#/active"},"Active")),y("li",null,y("a",{class:()=>q({selected:"completed"===J()}),href:"#/completed"},"Completed"))),()=>B().length>0&&y("button",{class:"clear-completed",onclick:D},"Clear completed")))]))())}();
