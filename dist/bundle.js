!function(){"use strict";let e,t=[];function l(l){function n(t){if(0===arguments.length)return e&&!n.__o.has(e)&&(n.__o.add(e),e.u.push(n)),l;l=t;let o=e;return e=void 0,n.o=new Set(n.__o),n.o.forEach(e=>e.i=!1),n.o.forEach(e=>{e.i||e()}),e=o,l}return n.$o=!0,n.__o=new Set,n.t=t,n}function n(t,l){function n(){let i=e;e&&e.__c.push(n);let c=n.__c;return r(n),n.i=!0,e=n,l=t(l),c.forEach(e=>{-1===n.__c.indexOf(e)&&(e.i=!0)}),function e(t){return t.reduce((t,l)=>t.concat(l,e(l.__c)),[])}(n.__c).forEach(o),e=i,l}function c(){return n.i?n.u.forEach(e=>e()):l=n(),l}return t.s=n,i(n),n(),c.$o=!0,c}function o(e){e.i&&e.u.forEach(t=>{t.o&&t.o.delete(e)})}function r(e){e.__c.forEach(r),e.u.forEach(t=>{t.__o.delete(e),t.o&&t.o.delete(e)}),e.l.forEach(e=>e()),i(e)}function i(e){e.u=[],e.__c=[],e.l=[]}let c={},s=[];function a(e){return this.t[e.type](e)}c.h=(...e)=>{let t,l=n=>{if(null==n);else if("string"==typeof n)t?c.add(t,n):t=c.s?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);else if(Array.isArray(n))t||(t=document.createDocumentFragment()),n.forEach(l);else if(n instanceof Node)t?c.add(t,n):t=n;else if("object"==typeof n)c.property(t,n,null,c.s);else if("function"==typeof n)if(t){let e=c.add(t,"");c.insert(t,n,e)}else t=n.apply(null,e.splice(1));else c.add(t,""+n)};return e.forEach(l),t},c.insert=(e,t,l,n,o)=>(e=l&&l.parentNode||e,o=o||n instanceof Node&&n,t===n||(n&&"string"!=typeof n||!("string"==typeof t||"number"==typeof t&&(t+=""))?"function"==typeof t?c.subscribe(()=>{n=c.insert(e,t.call({el:e,endMark:l}),l,n,o)}):(l?n&&(o||(o=n.o&&n.o.nextSibling||l.previousSibling),c.rm(e,o,l)):e.textContent="",n=null,t&&!0!==t&&(n=c.add(e,t,l))):(null!=n&&e.firstChild?l?(l.previousSibling||e.lastChild).data=t:e.firstChild.data=t:l?c.add(e,t,l):e.textContent=t,n=t)),n),c.property=(e,t,l,n,o)=>{if(null!=t)if(!l||"attrs"===l&&(n=!0))for(l in t)c.property(e,t[l],l,n,o);else"o"!==l[0]||"n"!==l[1]||t.$o?"function"==typeof t?c.subscribe(()=>{c.property(e,t.call({el:e,name:l}),l,n,o)}):o?e.style.setProperty(l,t):n||"data-"===l.slice(0,5)||"aria-"===l.slice(0,5)?e.setAttribute(l,t):"style"===l?"string"==typeof t?e.style.cssText=t:c.property(e,t,null,n,!0):("class"===l&&(l+="Name"),e[l]=t):((e,t,l)=>{t=t.slice(2).toLowerCase(),l?e.addEventListener(t,a):e.removeEventListener(t,a),(e.t||(e.t={}))[t]=l})(e,l,t)},c.add=(e,t,l)=>{let n=(e=>{const{childNodes:t}=e;if(t&&11===e.nodeType)return t.length<2?t[0]:{o:c.add(e,"",t[0])}})(t=(e=>"string"==typeof e?document.createTextNode(e):e instanceof Node?e:c.h(s,e))(t))||t;return e.insertBefore(t,l&&l.parentNode&&l),n},c.rm=(e,t,l)=>{for(;t&&t!==l;){let l=t.nextSibling;e===t.parentNode&&e.removeChild(t),t=l}},c.subscribe=function(e){return n(e),()=>r(e.s)},c.cleanup=function(t){return e&&e.l.push(t),t},c.root=function(t){let l=e,n=()=>{};e=n,i(n);let o=t(()=>{r(n),e=void 0});return e=l,o},c.sample=function(t){let l=e;e=void 0;let n=t();return e=l,n},c.hs=(...e)=>{let t=c.s;c.s=!0;let l=u(...e);return c.s=t,l};let u=(...e)=>c.h.apply(c.h,e);function d(e,t,l){const{root:n,subscribe:o,sample:r,cleanup:i}=c;null==l&&(l=!t.$t);let s=c.h([]),a=c.add(s,""),u=new Map,d=new Map,f=new Set;function p(e,o){if(null==e)return;let r=d.get(e);return 1===o?(f.delete(e),r||(r=l?n(l=>(u.set(e,l),t(e.$v||e))):t(e.$v||e),11===r.nodeType&&(r=(e=>{const{childNodes:t}=e,{length:l}=t;if(l<2)return t[0];let n=Array.from(t);return{nodeType:111,t:n[0],o:n[l-1],l(){if(t.length!==l){let t=0;for(;t<l;)e.appendChild(n[t++])}return e}}})(r)||r),d.set(e,r))):-1===o&&f.add(e),((e,t)=>111===e.nodeType?1/t<0?t?c.rm(e.t.parentNode,e.t.nextSibling,e.o.nextSibling)||e.t:e.o:t?e.l():e.t:e)(r,o)}function h(e){let t=u.get(e);t&&(t(),u.delete(e)),d.delete(e)}return i(o(t=>{let l=e();return r(()=>{f.clear();let e=Array.from(function(e,t,l,n,o){let r,i,c=new Map,s=new Map;for(r=0;r<t.length;r++)c.set(t[r],r);for(r=0;r<l.length;r++)s.set(l[r],r);for(r=i=0;r!==t.length||i!==l.length;){var a=t[r],u=l[i];if(null===a)r++;else if(l.length<=i)e.removeChild(n(t[r],-1)),r++;else if(t.length<=r)e.insertBefore(n(u,1),n(t[r],0)||o),i++;else if(a===u)r++,i++;else{var d=s.get(a),f=c.get(u);void 0===d?(e.removeChild(n(t[r],-1)),r++):void 0===f?(e.insertBefore(n(u,1),n(t[r],0)||o),i++):(e.insertBefore(n(t[f],1),n(t[r],0)||o),t[f]=null,f>r+1&&r++,i++)}}return l}(a.parentNode,t||[],l,p,a));return f.forEach(h),e})})),i((function(){u.forEach(e=>e()),u.clear(),d.clear(),f.clear()})),s}const f=(e,t=!1,n=Date.now())=>({id:n,title:g(l(e)),completed:g(l(t))}),p=(e=>({todos:g(l(e))}))([]),h=localStorage.getItem("todos-sinuous");function g(e){return e.toJSON=m,e}function m(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}h&&p.todos(JSON.parse(h).todos.map(e=>f(e.title,e.completed,e.id))),n(()=>localStorage.setItem("todos-sinuous",JSON.stringify(p)));const{todos:y}=p,v=l(),b=l("all"),_=()=>y().filter(e=>e.completed()),E=()=>y().filter(e=>!e.completed()),N=()=>"all"===b()?y():"completed"===b()?_():E(),S=()=>y(y().filter(e=>!e.completed()));function w(e){const t=e.target.checked;y().filter(e=>e.completed()!==t).forEach(e=>e.completed(t))}function k({target:e,keyCode:t}){let l=e.value.trim();13===t&&l&&(y(y().concat(f(l))),e.value="")}function C(e,t){let l=e.target.value.trim();v()===t&&l&&(x({id:t,title:l}),v(null))}function x({id:e,title:t,completed:l}){const n=y().filter(t=>t.id===e)[0];t&&n.title(t),null!=l&&n.completed(l)}function A(e){var t,l="";for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}const T=()=>b(location.hash.slice(2)||"all");window.addEventListener("hashchange",T),T(),document.querySelector(".todoapp").append(u([u("header",{class:"header"},u("h1",null,"todos"),u("input",{class:"new-todo",placeholder:"What needs to be done?",onkeyup:k,autofocus:!0})),u("section",{class:"main",hidden:()=>!y().length},u("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",oninput:w,checked:()=>!E().length}),u("label",{htmlFor:"toggle-all"},"Mark all as complete"),u("ul",{class:"todo-list"},d(N,({id:e,title:t,completed:l})=>u("li",{class:()=>A({completed:l(),editing:v()===e})},u("div",{class:"view"},u("input",{class:"toggle",type:"checkbox",checked:l,oninput:t=>function(e,t){x({id:t,completed:e.target.checked})}(t,e)}),u("label",{ondblclick:()=>v(e)},t),u("button",{class:"destroy",onclick:()=>function(e){return y(y().filter(t=>t.id!==e))}(e)})),()=>{return v()===e&&(l=u("input",{class:"edit",value:t,onfocusout:t=>C(t,e),onkeyup:t=>function(e,t){13===e.keyCode?C(e,t):27===e.keyCode&&v(null)}(t,e)}),setTimeout(()=>l.focus()),l);var l}))),u("footer",{class:"footer"},u("span",{class:"todo-count"},u("strong",null,()=>E().length),()=>1===E().length?" item":" items"," left"),u("ul",{class:"filters"},u("li",null,u("a",{class:()=>A({selected:"all"===b()}),href:"#/"},"All")),u("li",null,u("a",{class:()=>A({selected:"active"===b()}),href:"#/active"},"Active")),u("li",null,u("a",{class:()=>A({selected:"completed"===b()}),href:"#/completed"},"Completed"))),()=>_().length>0&&u("button",{class:"clear-completed",onclick:S},"Clear completed")))]))}();
