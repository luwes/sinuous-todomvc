!function(){"use strict";let e,t;function n(n){function o(l){if(void 0===l)return e&&o.o[o.o.length-1]!==e&&(o.o.push(e),e.u.push(o)),n;if(t)return void 0===o.t&&t.push(o),o.t=l,l;n=l;const i=e;return e=void 0,o.o.forEach(e=>e.i=0),o.o.slice().forEach(e=>{e.i||e()}),e=i,n}return o.$o=1,o.o=[],o}function o(t,n){function o(){const i=e;return e&&e.s.push(o),l(o),o.i=1,e=o,n=t(n),e=i,n}return t.v=o,i(o),o(),function(){return o.i?o.u.forEach(e=>e()):n=o(),n}}function l(e){e.s.forEach(l),e.u.forEach(t=>{t.o.splice(t.o.indexOf(e),1)}),e.l.forEach(e=>e()),i(e)}function i(e){e.u=[],e.s=[],e.l=[]}var c=Object.freeze({S:o,cleanup:function(t){return e&&e.l.push(t),t},isListening:function(){return!!e},o:n,observable:n,root:function(t){const n=e,o=()=>{};e=o,i(o);const c=t(()=>{l(o),e=void 0});return e=n,c},sample:function(t){const n=e;e=void 0;const o=t();return e=n,o},subscribe:function(e){return o(e),()=>l(e.v)},transaction:function(e){t=[];const n=e();let o=t;return t=void 0,o.forEach(e=>{if(e.t){const t=e.t;e.t=void 0,e(t)}}),n},unsubscribe:function(e){l(e.v)}});const s={},r=[],u="__g";function a(e,t,n,o){if(n){if(t){if(!o){const t=(o=n.previousSibling||e.lastChild)[u];if(t)for(o=o.previousSibling;o&&o[u]!==t;)o=o.previousSibling}let t;for(;o&&o!==n;)t=o.nextSibling,e.removeChild(o),o[u]=0,o=t}}else e.textContent=""}let d=0;function f(e,t,n,o){e=n&&n.parentNode||e;const l=typeof t;return t===o||(!t&&0!==t||!0===t?(a(e,o,n),o=null):o&&"string"!=typeof o||!("string"===l||"number"===l&&(t+=""))?"function"===l?s.subscribe(function(){o=f(e,t(),n,o)}):(a(e,o,n),t instanceof Node||(t=s.h(r,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[u]=t.lastChild[u]=++d),e.insertBefore(t,n||null),o=t):(null!=o&&e.firstChild?n?(n.previousSibling||e.lastChild).data=t:e.firstChild.data=t:n?e.insertBefore(document.createTextNode(t),n):e.textContent=t,o=t)),o}function p(e,t){for(let t in e)s[t]=e[t];function n(){const e=r.slice.call(arguments);let n;function o(l){const i=typeof l;if(null==l);else if("string"===i)n?n.appendChild(document.createTextNode(l)):n=t?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l);else if(Array.isArray(l))n||(n=document.createDocumentFragment()),l.forEach(o);else if(l instanceof Node)n?n.appendChild(l):n=l;else if("object"===i)for(let e in l)h(e,l[e],n,t);else if("function"===i)if(n){const e=n.appendChild(document.createTextNode(""));l.$t?l.$t(1,f,n,""):f(n,l,e)}else n=l.apply(null,e.splice(0));else n.appendChild(document.createTextNode(""+l))}for(;e.length;)o(e.shift());return n}return s.h=n,n}function h(e,t,n,o,l){if("o"!==e[0]||"n"!==e[1]||t.$o)if("function"==typeof t)t.$t?t.$t(2,h,n,e):s.subscribe(()=>{h(e,t(),n,o,l)});else if(l)n.style.setProperty(e,t);else if(o||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5))n.setAttribute(e,t);else if("style"===e)if("string"==typeof t)n.style.cssText=t;else for(e in t)h(e,t[e],n,o,!0);else if("attrs"===e)for(e in t)h(e,t[e],n,!0);else"class"===e&&(e+="Name"),n[e]=t;else!function(e,t,n){t=t.slice(2);const o=s.cleanup(()=>e.removeEventListener(t,m));n?e.addEventListener(t,m):o(),(e.t||(e.t={}))[t]=n}(n,e,t)}function m(e){return this.t[e.type](e)}const g=p(c),v=(p(c,!0),n),b=[];function y(e,t){const{subscribe:n,root:o,cleanup:l}=s;let i=document.createDocumentFragment();const c=i.appendChild(document.createTextNode("")),r=i.appendChild(document.createTextNode("")),u=new Map;function a(e){let t=u.get(e);t&&t(),u.delete(e)}return l(n(n=>{n=n||[];const l=e()||[],s=new Map,d=new Map;let f,p;i=r.parentNode;const h=b.slice.call(i.childNodes),m=b.indexOf.call(h,c),g=b.indexOf.call(h,r);for(f=0;f<n.length;f++)s.set(n[f],f);for(f=0;f<l.length;f++)d.set(l[f],f);for(f=p=0;f!==n.length||p!==l.length;){const e=n[f],t=l[p];if(null===e)f++;else if(l.length<=p)a(i.removeChild(v(f))),f++;else if(n.length<=f)i.insertBefore(y(t,p),v(f)||r),p++;else if(e===t)f++,p++;else{const o=d.get(e),l=s.get(t);void 0===o?(a(i.removeChild(v(f))),f++):void 0===l?(i.insertBefore(y(t,p),v(f)||r),p++):(i.insertBefore(v(l),v(f)||r),n[l]=null,p++)}}function v(e){const t=m+e+1;return t>m&&t<g&&h[t]}function y(e,n){return o(o=>(e=(e=t(e,n))instanceof Node?e:document.createTextNode(e),u.set(e,o),e))}return l.slice()})),l(function(){u.forEach(e=>e()),u.clear()}),i}const C=(e,t=!1,n=Date.now())=>({id:n,title:k(v(e)),completed:k(v(t))}),N=(e=>({todos:k(v(e))}))([]),x=localStorage.getItem("todos-sinuous");function k(e){return e.toJSON=E,e}function E(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}x&&N.todos(JSON.parse(x).todos.map(e=>C(e.title,e.completed,e.id))),o(()=>localStorage.setItem("todos-sinuous",JSON.stringify(N)));const S=27,w=13,{todos:T}=N,O=v(),$=v("all"),A=()=>T().filter(e=>e.completed()),B=()=>T().filter(e=>!e.completed()),J=()=>"all"===$()?T():"completed"===$()?A():B(),L=()=>T(T().filter(e=>!e.completed()));function M(e){const t=e.target.checked;T().filter(e=>e.completed()!==t).forEach(e=>e.completed(t))}function D({target:e,keyCode:t}){let n=e.value.trim();t===w&&n&&(T(T().concat(C(n))),e.value="")}function F(e,t){let n=e.target.value.trim();O()===t&&n&&(j({id:t,title:n}),O(null))}function j({id:e,title:t,completed:n}){const o=T().filter(t=>t.id===e)[0];t&&o.title(t),null!=n&&o.completed(n)}function I(e){var t,n="";for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const _=()=>$(location.hash.slice(2)||"all");window.addEventListener("hashchange",_),_(),document.querySelector(".todoapp").append((()=>g([g("header",{class:"header"},g("h1",null,"todos"),g("input",{class:"new-todo",placeholder:"What needs to be done?",onkeyup:D,autofocus:!0})),g("section",{class:"main",hidden:()=>!T().length},g("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",oninput:M,checked:()=>!B().length}),g("label",{htmlFor:"toggle-all"},"Mark all as complete"),g("ul",{class:"todo-list"},y(J,({id:e,title:t,completed:n})=>g("li",{class:()=>I({completed:n(),editing:O()===e})},g("div",{class:"view"},g("input",{class:"toggle",type:"checkbox",checked:n,oninput:t=>(function(e,t){j({id:t,completed:e.target.checked})})(t,e)}),g("label",{ondblclick:()=>O(e)},t),g("button",{class:"destroy",onclick:()=>(function(e){return T(T().filter(t=>t.id!==e))})(e)})),()=>O()===e&&function(e){return setTimeout(()=>e.focus()),e}(g("input",{class:"edit",value:t,onfocusout:t=>F(t,e),onkeyup:t=>(function(e,t){e.keyCode===w?F(e,t):e.keyCode===S&&O(null)})(t,e)}))))),g("footer",{class:"footer"},g("span",{class:"todo-count"},g("strong",null,()=>B().length),()=>1===B().length?" item":" items"," left"),g("ul",{class:"filters"},g("li",null,g("a",{class:()=>I({selected:"all"===$()}),href:"#/"},"All")),g("li",null,g("a",{class:()=>I({selected:"active"===$()}),href:"#/active"},"Active")),g("li",null,g("a",{class:()=>I({selected:"completed"===$()}),href:"#/completed"},"Completed"))),()=>A().length>0&&g("button",{class:"clear-completed",onclick:L},"Clear completed")))]))())}();
