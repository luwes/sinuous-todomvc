!function(){"use strict";let e,t;function o(o){function n(i){if(void 0===i)return e&&n.o[n.o.length-1]!==e&&(n.o.push(e),e.u.push(n)),o;if(t)return void 0===n.t&&t.push(n),n.t=i,i;o=i;const l=e;return e=void 0,n.o.forEach(e=>e.i=0),n.o.slice().forEach(e=>{e.i||e()}),e=l,o}return n.$o=1,n.o=[],n}function n(t,o){function n(){const l=e;return e&&e.s.push(n),i(n),n.i=1,e=n,o=t(o),e=l,o}return t.v=n,l(n),n(),function(){return n.i?n.u.forEach(e=>e()):o=n(),o}}function i(e){e.s.forEach(i),e.u.forEach(t=>{t.o.splice(t.o.indexOf(e),1)}),e.l.forEach(e=>e()),l(e)}function l(e){e.u=[],e.s=[],e.l=[]}var c=Object.freeze({S:n,cleanup:function(t){return e&&e.l.push(t),t},isListening:function(){return!!e},o:o,observable:o,root:function(t){const o=e,n=()=>{};e=n,l(n);const c=t(()=>{i(n),e=void 0});return e=o,c},sample:function(t){const o=e;e=void 0;const n=t();return e=o,n},subscribe:function(e){return n(e),()=>i(e.v)},transaction:function(e){t=[];const o=e();let n=t;return t=void 0,n.forEach(e=>{if(e.t){const t=e.t;e.t=void 0,e(t)}}),o},unsubscribe:function(e){i(e.v)}});const s={},r=[],u="__g";function d(e,t,o,n){if(o){if(t){if(!n){const t=(n=o.previousSibling||e.lastChild)[u];if(t)for(n=n.previousSibling;n&&n[u]!==t;)n=n.previousSibling}let t;for(;n&&n!==o;)t=n.nextSibling,e.removeChild(n),n[u]=0,n=t}}else e.textContent=""}let a=0;function f(e,t,o,n){e=o&&o.parentNode||e;const i=typeof t;return t===n||(!t&&0!==t||!0===t?(d(e,n,o),n=null):n&&"string"!=typeof n||!("string"===i||"number"===i&&(t+=""))?"function"===i?s.subscribe(function(){n=f(e,t(),o,n)}):(d(e,n,o),t instanceof Node||(t=s.h(r,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[u]=t.lastChild[u]=++a),e.insertBefore(t,o||null),n=t):(null!=n&&e.firstChild?o?(o.previousSibling||e.lastChild).data=t:e.firstChild.data=t:o?e.insertBefore(document.createTextNode(t),o):e.textContent=t,n=t)),n}function p(e,t){for(let t in e)s[t]=e[t];function o(){const e=r.slice.call(arguments);let o;function n(i){const l=typeof i;if(null==i);else if("string"===l)o?o.appendChild(document.createTextNode(i)):o=t?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);else if(Array.isArray(i))o||(o=document.createDocumentFragment()),i.forEach(n);else if(i instanceof Node)o?o.appendChild(i):o=i;else if("object"===l)for(let e in i)h(e,i[e],o,t);else if("function"===l)if(o){const e=o.appendChild(document.createTextNode(""));i.$t?i.$t(1,f,o,""):f(o,i,e)}else o=i.apply(null,e.splice(0));else o.appendChild(document.createTextNode(""+i))}for(;e.length;)n(e.shift());return o}return s.h=o,o}function h(e,t,o,n,i){if("o"!==e[0]||"n"!==e[1]||t.$o)if("function"==typeof t)t.$t?t.$t(2,h,o,e):s.subscribe(()=>{h(e,t(),o,n,i)});else if(i)o.style.setProperty(e,t);else if(n||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5))o.setAttribute(e,t);else if("style"===e)if("string"==typeof t)o.style.cssText=t;else for(e in t)h(e,t[e],o,n,!0);else if("attrs"===e)for(e in t)h(e,t[e],o,!0);else"class"===e&&(e+="Name"),o[e]=t;else!function(e,t,o){t=t.slice(2);const n=s.cleanup(()=>e.removeEventListener(t,m));o?e.addEventListener(t,m):n(),(e.t||(e.t={}))[t]=o}(o,e,t)}function m(e){return this.t[e.type](e)}const g=p(c),v=(p(c,!0),o),C=(e,t=!1,o=Date.now())=>({id:o,title:b(v(e)),completed:b(v(t))});function b(e){return e.toJSON=y,e}function y(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}const E=27,k=13;function S(e){var t,o="";for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}const w=(e=>({todos:b(v(e))}))([]),N=function({todos:e}){const t=v(),o=v("all"),i=n(()=>e().filter(e=>e.completed()).length),l=n(()=>e().length-i());function c({target:e},o){let n=e.value.trim();t()===o&&n&&(s({id:o,title:n}),t(null))}function s({id:t,title:o,completed:n}){const i=e().filter(e=>e.id===t)[0];o&&i.title(o),null!=n&&i.completed(n)}return{completedCount:i,editing:t,remainingCount:l,showMode:o,todos:e,addTodo:function({target:t,keyCode:o}){let n=t.value.trim();o===k&&n&&(e(e().concat(C(n))),t.value="")},filterList:function(e){return"active"===o()?e.filter(e=>!e.completed()):"completed"===o()?e.filter(e=>e.completed()):e},remove:function(t){return e(e().filter(e=>e.id!==t))},clearCompleted:function(){return e(e().filter(e=>!e.completed()))},doneEditing:function(e,o){e.keyCode===k?c(e,o):e.keyCode===E&&t(null)},save:c,toggle:function(e,t){s({id:t,completed:e.target.checked})},toggleAll:function(t){const o=t.target.checked;e().filter(e=>e.completed()!==o).forEach(e=>e.completed(o))}}}(w),x=localStorage.getItem("todos-sinuous");x&&w.todos(JSON.parse(x).todos.map(e=>C(e.title,e.completed,e.id))),n(()=>localStorage.setItem("todos-sinuous",JSON.stringify(w)));const T=()=>N.showMode(location.hash.slice(2)||"all");window.addEventListener("hashchange",T),T();document.querySelector(".todoapp").append((e=>g([g("header",{class:"header"},g("h1",null,"todos"),g("input",{class:"new-todo",placeholder:"What needs to be done?",autofocus:!0,onkeyup:e.addTodo})),g("section",{class:"main",hidden:()=>0===e.todos().length},g("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",checked:()=>!e.remainingCount(),oninput:e.toggleAll}),g("label",{htmlFor:"toggle-all"},"Mark all as complete"),g("ul",{class:"todo-list"},()=>e.filterList(e.todos()).map(({id:t,title:o,completed:n})=>g("li",{class:()=>S({completed:n(),editing:e.editing()===t})},g("div",{class:"view"},g("input",{class:"toggle",type:"checkbox",checked:n,oninput:o=>e.toggle(o,t)}),g("label",{ondblclick:()=>e.editing(t)},o),g("button",{class:"destroy",onclick:()=>e.remove(t)})),()=>{if(e.editing()===t){const n=g("input",{class:"edit",value:o,onfocusout:o=>e.save(o,t),onkeyup:o=>e.doneEditing(o,t)});return setTimeout(()=>n.focus()),n}})))),g("footer",{class:"footer",hidden:()=>0===e.todos().length},g("span",{class:"todo-count"},g("strong",null,e.remainingCount),()=>1===e.remainingCount()?" item":" items"," left"),g("ul",{class:"filters"},g("li",null,g("a",{class:()=>S({selected:"all"===e.showMode()}),href:"#/"},"All")),g("li",null,g("a",{class:()=>S({selected:"active"===e.showMode()}),href:"#/active"},"Active")),g("li",null,g("a",{class:()=>S({selected:"completed"===e.showMode()}),href:"#/completed"},"Completed"))),()=>e.completedCount()>0?g("button",{class:"clear-completed",onclick:e.clearCompleted},"Clear completed"):null)]))(N))}();
