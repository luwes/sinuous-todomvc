!function(){"use strict";let e,t;function n(n){function o(i){if(void 0===i)return e&&o.o[o.o.length-1]!==e&&(o.o.push(e),e.u.push(o)),n;if(t)return void 0===o.t&&t.push(o),o.t=i,i;n=i;const l=e;return e=void 0,o.o.forEach(e=>e.i=0),o.o.slice().forEach(e=>{e.i||e()}),e=l,n}return o.$o=1,o.o=[],o}function o(t,n){function o(){const l=e;return e&&e.s.push(o),i(o),o.i=1,e=o,n=t(n),e=l,n}return t.v=o,l(o),o(),function(){return o.i?o.u.forEach(e=>e()):n=o(),n}}function i(e){e.s.forEach(i),e.u.forEach(t=>{t.o.splice(t.o.indexOf(e),1)}),e.l.forEach(e=>e()),l(e)}function l(e){e.u=[],e.s=[],e.l=[]}var r=Object.freeze({S:o,cleanup:function(t){return e&&e.l.push(t),t},isListening:function(){return!!e},o:n,observable:n,root:function(t){const n=e,o=()=>{};e=o,l(o);const r=t(()=>{i(o),e=void 0});return e=n,r},sample:function(t){const n=e;e=void 0;const o=t();return e=n,o},subscribe:function(e){return o(e),()=>i(e.v)},transaction:function(e){t=[];const n=e();let o=t;return t=void 0,o.forEach(e=>{if(e.t){const t=e.t;e.t=void 0,e(t)}}),n},unsubscribe:function(e){i(e.v)}});const c={},s=[],u="__g";function f(e,t,n,o){if(n){if(t){if(!o){const t=(o=n.previousSibling||e.lastChild)[u];if(t)for(o=o.previousSibling;o&&o[u]!==t;)o=o.previousSibling}let t;for(;o&&o!==n;)t=o.nextSibling,e.removeChild(o),o[u]=0,o=t}}else e.textContent=""}let d=0;function a(e,t,n,o){e=n&&n.parentNode||e;const i=typeof t;return t===o||(!t&&0!==t||!0===t?(f(e,o,n),o=null):o&&"string"!=typeof o||!("string"===i||"number"===i&&(t+=""))?"function"===i?c.subscribe(function(){o=a(e,t(),n,o)}):(f(e,o,n),t instanceof Node||(t=c.h(s,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[u]=t.lastChild[u]=++d),e.insertBefore(t,n||null),o=t):(null!=o&&e.firstChild?n?(n.previousSibling||e.lastChild).data=t:e.firstChild.data=t:n?e.insertBefore(document.createTextNode(t),n):e.textContent=t,o=t)),o}function p(e,t){for(let t in e)c[t]=e[t];function n(){const e=s.slice.call(arguments);let n;function o(i){const l=typeof i;if(null==i);else if("string"===l)n?n.appendChild(document.createTextNode(i)):n=t?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);else if(Array.isArray(i))n||(n=document.createDocumentFragment()),i.forEach(o);else if(i instanceof Node)n?n.appendChild(i):n=i;else if("object"===l)for(let e in i)g(e,i[e],n,t);else if("function"===l)if(n){const e=n.appendChild(document.createTextNode(""));i.$t?i.$t(1,a,n,""):a(n,i,e)}else n=i.apply(null,e.splice(0));else n.appendChild(document.createTextNode(""+i))}for(;e.length;)o(e.shift());return n}return c.h=n,n}function g(e,t,n,o,i){if("o"!==e[0]||"n"!==e[1]||t.$o)if("function"==typeof t)t.$t?t.$t(2,g,n,e):c.subscribe(()=>{g(e,t(),n,o,i)});else if(i)n.style.setProperty(e,t);else if(o||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5))n.setAttribute(e,t);else if("style"===e)if("string"==typeof t)n.style.cssText=t;else for(e in t)g(e,t[e],n,o,!0);else if("attrs"===e)for(e in t)g(e,t[e],n,!0);else"class"===e&&(e+="Name"),n[e]=t;else!function(e,t,n){t=t.slice(2);const o=c.cleanup(()=>e.removeEventListener(t,h));n?e.addEventListener(t,h):o(),(e.t||(e.t={}))[t]=n}(n,e,t)}function h(e){return this.t[e.type](e)}const m=p(r),v=(p(r,!0),n),b="__g",C="nextSibling";function S(e,t,n){const o=e[b];if(o)for(e=e[t];e&&e[b]!==o;)e=e[t];return n?e:e[t]}function y(e,t,n){let o;for(;t!==n;)o=t.nextSibling,e.removeChild(t),t=o}function x(e,t,n,o){let i;for(;t!==n;)i=t.nextSibling,e.insertBefore(t,o),t=i}function k(e,t){let n=-1,o=e.length;if(o>0&&e[o-1]<=t)return o-1;for(;o-n>1;){var i=(n+o)/2|0;e[i]>t?o=i:n=i}return n}let w=0;function N(e,t){const{subscribe:n,root:o,sample:i,cleanup:l}=c,r=new Map;let s=document.createDocumentFragment();const u=s.appendChild(document.createTextNode("")),f=s.appendChild(document.createTextNode(""));function d(){r.forEach(e=>e()),r.clear()}function a(e){let t=r.get(e);t&&t(),r.delete(e)}function p(e,n,i,l,c){return o(o=>{const s=function(e,t,n,o){let i;const l=typeof t;return"string"===l||"number"===l?t=document.createTextNode(t):11===t.nodeType&&(i=t.firstChild)&&i!==t.lastChild&&(i[b]=t.lastChild[b]=o),e.insertBefore(t,n||null),i||t}(e,t(n,i,l),c,++w);return r.set(s,o),s})}return l(n(t=>{t=t||[];const n=e()||[];return i(()=>(function e(t,n,o,i,l,r,c,s){const u=o.length;if(t=l.parentNode,0===u)return i.previousSibling||l.nextSibling?y(t,i.nextSibling,l):(t.textContent="",t.appendChild(i),t.appendChild(l)),c&&c(),[];if(0===n.length){for(let e=0;e<u;e++)r(t,o[e],e,o,l);return o.slice()}let f,d,a=0,p=0,g=!0,h=n.length-1,m=u-1,v=i.nextSibling,b=v,w=l.previousSibling,N=l;e:for(;g;){let e;for(g=!1,f=n[a],d=o[p];f===d;){if(a++,p++,b=v=S(v,C),h<a||m<p)break e;f=n[a],d=o[p]}for(f=n[h],d=o[m];f===d;){if(h--,m--,w=(N=S(w,"previousSibling",!0)).previousSibling,h<a||m<p)break e;f=n[h],d=o[m]}for(f=n[h],d=o[p];f===d;){g=!0;let i=S(w,"previousSibling",!0);if(e=i.previousSibling,b!==i&&(x(t,i,w.nextSibling,b),w=e),p++,--h<a||m<p)break e;f=n[h],d=o[p]}for(f=n[a],d=o[m];f===d;){if(g=!0,e=S(v,C),v!==N){let n=e.previousSibling;x(t,v,e,N),N=n,v=e}if(m--,h<++a||m<p)break e;f=n[a],d=o[m]}}if(m<p){if(a<=h){let e,n;for(;a<=h;)e=(n=S(w,"previousSibling",!0)).previousSibling,y(t,n,w.nextSibling),s&&s(n),w=e,h--}return o.slice()}if(h<a){if(p<=m)for(;p<=m;)r(t,o[p],p,o,N),p++;return o.slice()}const E=new Array(m+1-p);for(let e=p;e<=m;e++)E[e]=-1;const T=new Map;for(let e=p;e<=m;e++)T.set(o[e],e);let A=0,M=[];for(let e=a;e<=h;e++)T.has(n[e])?(E[T.get(n[e])]=e,A++):M.push(e);if(0===A)return e(t,e(t,n,[],i,l,r,c),o,i,l,r);const O=function(e,t){let n=[],o=[],i=-1,l=new Array(e.length);for(var r=t,c=e.length;r<c;r++){var s=e[r];if(!(s<0)){var u=k(n,s);-1!==u&&(l[r]=o[u]),u===i?(n[++i]=s,o[i]=r):s<n[u+1]&&(n[u+1]=s,o[u+1]=r)}}for(r=o[i];i>=0;r=l[r],i--)n[i]=r;return n}(E,p),L=[];let $=v;for(let e=a;e<=h;e++)L[e]=$,$=S($,C);for(let e=0;e<M.length;e++){let n=L[M[e]];y(t,n,S(n,C)),s&&s(n)}let J,B=O.length-1;for(let e=m;e>=p;e--)O[B]===e?(N=L[E[O[B]]],B--):(-1===E[e]?J=r(t,o[e],e,o,N):x(t,J=L[E[e]],S(J,C),N),N=J);return o.slice()})(s,t,n,u,f,p,d,a))})),l(d),s}const E=(e,t=!1,n=Date.now())=>({id:n,title:T(v(e)),completed:T(v(t))});function T(e){return e.toJSON=A,e}function A(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}const M=27,O=13;function L(e){var t,n="";for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const $=(e=>({todos:T(v(e))}))([]),J=function({todos:e}){const t=v(),n=v("all"),i=o(()=>e().filter(e=>e.completed()).length),l=o(()=>e().length-i());function r({target:e},n){let o=e.value.trim();t()===n&&o&&(c({id:n,title:o}),t(null))}function c({id:t,title:n,completed:o}){const i=e().filter(e=>e.id===t)[0];n&&i.title(n),null!=o&&i.completed(o)}return{completedCount:i,editing:t,remainingCount:l,showMode:n,todos:e,addTodo:function({target:t,keyCode:n}){let o=t.value.trim();n===O&&o&&(e(e().concat(E(o))),t.value="")},filterList:function(e){return"active"===n()?e.filter(e=>!e.completed()):"completed"===n()?e.filter(e=>e.completed()):e},remove:function(t){return e(e().filter(e=>e.id!==t))},clearCompleted:function(){return e(e().filter(e=>!e.completed()))},doneEditing:function(e,n){e.keyCode===O?r(e,n):e.keyCode===M&&t(null)},save:r,toggle:function(e,t){c({id:t,completed:e.target.checked})},toggleAll:function(t){const n=t.target.checked;e().filter(e=>e.completed()!==n).forEach(e=>e.completed(n))}}}($),B=localStorage.getItem("todos-sinuous");B&&$.todos(JSON.parse(B).todos.map(e=>E(e.title,e.completed,e.id))),o(()=>localStorage.setItem("todos-sinuous",JSON.stringify($)));const _=()=>J.showMode(location.hash.slice(2)||"all");window.addEventListener("hashchange",_),_();document.querySelector(".todoapp").append((e=>m([m("header",{class:"header"},m("h1",null,"todos"),m("input",{class:"new-todo",placeholder:"What needs to be done?",autofocus:!0,onkeyup:e.addTodo})),m("section",{class:"main",hidden:()=>0===e.todos().length},m("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",checked:()=>!e.remainingCount(),oninput:e.toggleAll}),m("label",{htmlFor:"toggle-all"},"Mark all as complete"),m("ul",{class:"todo-list"},N(()=>e.filterList(e.todos()),({id:t,title:n,completed:o})=>m("li",{class:()=>L({completed:o(),editing:e.editing()===t})},m("div",{class:"view"},m("input",{class:"toggle",type:"checkbox",checked:o,oninput:n=>e.toggle(n,t)}),m("label",{ondblclick:()=>e.editing(t)},n),m("button",{class:"destroy",onclick:()=>e.remove(t)})),()=>{if(e.editing()===t){const o=m("input",{class:"edit",value:n,onfocusout:n=>e.save(n,t),onkeyup:n=>e.doneEditing(n,t)});return setTimeout(()=>o.focus()),o}})))),m("footer",{class:"footer",hidden:()=>0===e.todos().length},m("span",{class:"todo-count"},m("strong",null,e.remainingCount),()=>1===e.remainingCount()?" item":" items"," left"),m("ul",{class:"filters"},m("li",null,m("a",{class:()=>L({selected:"all"===e.showMode()}),href:"#/"},"All")),m("li",null,m("a",{class:()=>L({selected:"active"===e.showMode()}),href:"#/active"},"Active")),m("li",null,m("a",{class:()=>L({selected:"completed"===e.showMode()}),href:"#/completed"},"Completed"))),()=>e.completedCount()>0?m("button",{class:"clear-completed",onclick:e.clearCompleted},"Clear completed"):null)]))(J))}();
