!function(){"use strict";const e=[];let t,n;function o(o){function l(c){if(0===arguments.length)return t&&!l.o.has(t)&&(l.o.add(t),t.u.push(l)),o;if(n)return l.t===e&&n.push(l),l.t=c,c;o=c;const i=t;return t=void 0,l.i=new Set(l.o),l.i.forEach(e=>e.s=!1),l.i.forEach(e=>{e.s||e()}),t=i,o}return l.$o=!0,l.o=new Set,l.t=e,l}function l(e,n){function o(){const l=t;t&&t.__c.push(o);const s=o.__c;return i(o),o.s=!0,t=o,n=e(n),s.forEach(e=>{-1===o.__c.indexOf(e)&&(e.s=!0)}),function e(t){return t.reduce((t,n)=>t.concat(n,e(n.__c)),[])}(o.__c).forEach(c),t=l,n}function l(){return o.s?o.u.forEach(e=>e()):n=o(),n}return e.v=o,s(o),o(),l.$o=!0,l}function c(e){e.s&&e.u.forEach(t=>{t.i&&t.i.delete(e)})}function i(e){e.__c.forEach(i),e.u.forEach(t=>{t.o.delete(e),t.i&&t.i.delete(e)}),e.S.forEach(e=>e()),s(e)}function s(e){e.u=[],e.__c=[],e.S=[]}var r=Object.freeze({__proto__:null,S:l,cleanup:function(e){return t&&t.S.push(e),e},computed:l,isListening:function(){return!!t},o:o,observable:o,root:function(e){const n=t,o=()=>{};t=o,s(o);const l=e(()=>{i(o),t=void 0});return t=n,l},sample:function(e){const n=t;t=void 0;const o=e();return t=n,o},subscribe:function(e){return l(e),()=>i(e.v)},transaction:function(t){n=[];const o=t();let l=n;return n=void 0,l.forEach(t=>{if(t.t!==e){const n=t.t;t.t=e,t(n)}}),o},unsubscribe:function(e){i(e.v)}});const u={},a=[],d="__g";function f(e,t,n,o){if(n){if(t){if(!o){const t=(o=n.previousSibling||e.lastChild)[d];if(t)for(o=o.previousSibling;o&&o[d]!==t;)o=o.previousSibling}let t;for(;o&&o!==n;)t=o.nextSibling,e.removeChild(o),o[d]=0,o=t}}else e.textContent=""}let p=0;function h(e,t,n,o,l){e=n&&n.parentNode||e;const c=typeof t;return t===o||(!t&&0!==t||!0===t?(f(e,o,n,l),o=null):o&&"string"!=typeof o||!("string"===c||"number"===c&&(t+=""))?"function"===c?u.subscribe(function(){o=u.insert(e,t(),n,o)}):(f(e,o,n,l),t instanceof Node||(t=u.h(a,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[d]=t.lastChild[d]=++p),e.insertBefore(t,n||null),o=t):(null!=o&&e.firstChild?n?(n.previousSibling||e.lastChild).data=t:e.firstChild.data=t:n?e.insertBefore(document.createTextNode(t),n):e.textContent=t,o=t)),o}function m(e,t,n,o,l){if(!e||"attrs"===e&&(o=!0))for(e in t)m(e,t[e],n,o,l);else"o"!==e[0]||"n"!==e[1]||t.$o?"function"==typeof t?t.$t?t.$t(2,m,n,e):u.subscribe(function(){m(e,t(),n,o,l)}):l?n.style.setProperty(e,t):o||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5)?n.setAttribute(e,t):"style"===e?"string"==typeof t?n.style.cssText=t:m(null,t,n,o,!0):("class"===e&&(e+="Name"),n[e]=t):function(e,t,n){t=t.slice(2);const o=u.cleanup(()=>e.removeEventListener(t,g));n?e.addEventListener(t,g):o(),(e.t||(e.t={}))[t]=n}(n,e,t)}function g(e){return this.t[e.type](e)}function v(e,t){for(let t in e)u[t]=e[t];function n(){const e=a.slice.call(arguments);let n;return e.forEach(function o(l){const c=typeof l;if(null==l);else if("string"===c)n?n.appendChild(document.createTextNode(l)):n=t?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l);else if(Array.isArray(l))n||(n=document.createDocumentFragment()),l.forEach(o);else if(l instanceof Node)n?n.appendChild(l):n=l;else if("object"===c)m(null,l,n,t);else if("function"===c)if(n){const e=n.appendChild(document.createTextNode(""));l.$t?l.$t(1,h,n,""):h(n,l,e)}else n=l.apply(null,e.splice(1));else n.appendChild(document.createTextNode(""+l))}),n}return u.insert=h,u.property=m,u.h=n,n}const b=v(r),y=(v(r,!0),o),C=[];function N(e,t){const{subscribe:n,root:o,cleanup:l}=u;let c=document.createDocumentFragment();const i=c.appendChild(document.createTextNode("")),s=c.appendChild(document.createTextNode("")),r=new Map;function a(e){let t=r.get(e);t&&t(),r.delete(e)}return l(n(n=>{n=n||[];const l=e()||[],u=new Map,d=new Map;let f,p;c=s.parentNode;const h=C.slice.call(c.childNodes),m=C.indexOf.call(h,i),g=C.indexOf.call(h,s);for(f=0;f<n.length;f++)u.set(n[f],f);for(f=0;f<l.length;f++)d.set(l[f],f);for(f=p=0;f!==n.length||p!==l.length;){const e=n[f],t=l[p];if(null===e)f++;else if(l.length<=p)a(c.removeChild(v(f))),f++;else if(n.length<=f)c.insertBefore(b(t,p),v(f)||s),p++;else if(e===t)f++,p++;else{const o=d.get(e),l=u.get(t);void 0===o?(a(c.removeChild(v(f))),f++):void 0===l?(c.insertBefore(b(t,p),v(f)||s),p++):(c.insertBefore(v(l),v(f)||s),n[l]=null,p++)}}function v(e){const t=m+e+1;return t>m&&t<g&&h[t]}function b(e,n){return o(o=>(e=(e=t(e,n))instanceof Node?e:document.createTextNode(e),r.set(e,o),e))}return l.slice()})),l(function(){r.forEach(e=>e()),r.clear()}),c}const S=(e,t=!1,n=Date.now())=>({id:n,title:x(y(e)),completed:x(y(t))}),_=(e=>({todos:x(y(e))}))([]),E=localStorage.getItem("todos-sinuous");function x(e){return e.toJSON=k,e}function k(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}E&&_.todos(JSON.parse(E).todos.map(e=>S(e.title,e.completed,e.id))),l(()=>localStorage.setItem("todos-sinuous",JSON.stringify(_)));const w=27,T=13,{todos:O}=_,$=y(),A=y("all"),B=()=>O().filter(e=>e.completed()),J=()=>O().filter(e=>!e.completed()),L=()=>"all"===A()?O():"completed"===A()?B():J(),M=()=>O(O().filter(e=>!e.completed()));function D(e){const t=e.target.checked;O().filter(e=>e.completed()!==t).forEach(e=>e.completed(t))}function F({target:e,keyCode:t}){let n=e.value.trim();t===T&&n&&(O(O().concat(S(n))),e.value="")}function j(e,t){let n=e.target.value.trim();$()===t&&n&&(I({id:t,title:n}),$(null))}function I({id:e,title:t,completed:n}){const o=O().filter(t=>t.id===e)[0];t&&o.title(t),null!=n&&o.completed(n)}function q(e){var t,n="";for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const z=()=>A(location.hash.slice(2)||"all");window.addEventListener("hashchange",z),z(),document.querySelector(".todoapp").append((()=>b([b("header",{class:"header"},b("h1",null,"todos"),b("input",{class:"new-todo",placeholder:"What needs to be done?",onkeyup:F,autofocus:!0})),b("section",{class:"main",hidden:()=>!O().length},b("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",oninput:D,checked:()=>!J().length}),b("label",{htmlFor:"toggle-all"},"Mark all as complete"),b("ul",{class:"todo-list"},N(L,({id:e,title:t,completed:n})=>b("li",{class:()=>q({completed:n(),editing:$()===e})},b("div",{class:"view"},b("input",{class:"toggle",type:"checkbox",checked:n,oninput:t=>(function(e,t){I({id:t,completed:e.target.checked})})(t,e)}),b("label",{ondblclick:()=>$(e)},t),b("button",{class:"destroy",onclick:()=>(function(e){return O(O().filter(t=>t.id!==e))})(e)})),()=>$()===e&&function(e){return setTimeout(()=>e.focus()),e}(b("input",{class:"edit",value:t,onfocusout:t=>j(t,e),onkeyup:t=>(function(e,t){e.keyCode===T?j(e,t):e.keyCode===w&&$(null)})(t,e)}))))),b("footer",{class:"footer"},b("span",{class:"todo-count"},b("strong",null,()=>J().length),()=>1===J().length?" item":" items"," left"),b("ul",{class:"filters"},b("li",null,b("a",{class:()=>q({selected:"all"===A()}),href:"#/"},"All")),b("li",null,b("a",{class:()=>q({selected:"active"===A()}),href:"#/active"},"Active")),b("li",null,b("a",{class:()=>q({selected:"completed"===A()}),href:"#/completed"},"Completed"))),()=>B().length>0&&b("button",{class:"clear-completed",onclick:M},"Clear completed")))]))())}();
