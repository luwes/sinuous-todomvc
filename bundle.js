!function(){"use strict";let e,t;function n(n){function o(i){if(void 0===i)return e&&o.o[o.o.length-1]!==e&&(o.o.push(e),e.u.push(o)),n;if(t)return void 0===o.t&&t.push(o),o.t=i,i;n=i;const l=e;return e=void 0,o.o.forEach(e=>e.i=0),o.o.slice().forEach(e=>{e.i||e()}),e=l,n}return o.$o=1,o.o=[],o}function o(t,n){function o(){const l=e;return e&&e.s.push(o),i(o),o.i=1,e=o,n=t(n),e=l,n}return t.v=o,l(o),o(),function(){return o.i?o.u.forEach(e=>e()):n=o(),n}}function i(e){e.s.forEach(i),e.u.forEach(t=>{t.o.splice(t.o.indexOf(e),1)}),e.l.forEach(e=>e()),l(e)}function l(e){e.u=[],e.s=[],e.l=[]}var r=Object.freeze({S:o,cleanup:function(t){return e&&e.l.push(t),t},isListening:function(){return!!e},o:n,observable:n,root:function(t){const n=e,o=()=>{};e=o,l(o);const r=t(()=>{i(o),e=void 0});return e=n,r},sample:function(t){const n=e;e=void 0;const o=t();return e=n,o},subscribe:function(e){return o(e),()=>i(e.v)},transaction:function(e){t=[];const n=e();let o=t;return t=void 0,o.forEach(e=>{if(e.t){const t=e.t;e.t=void 0,e(t)}}),n},unsubscribe:function(e){i(e.v)}});const c={},s=[],u="__g";function f(e,t,n,o){if(n){if(t){if(!o){const t=(o=n.previousSibling||e.lastChild)[u];if(t)for(o=o.previousSibling;o&&o[u]!==t;)o=o.previousSibling}let t;for(;o&&o!==n;)t=o.nextSibling,e.removeChild(o),o[u]=0,o=t}}else e.textContent=""}let a=0;function d(e,t,n,o){e=n&&n.parentNode||e;const i=typeof t;return t===o||(!t&&0!==t||!0===t?(f(e,o,n),o=null):o&&"string"!=typeof o||!("string"===i||"number"===i&&(t+=""))?"function"===i?c.subscribe(function(){o=d(e,t(),n,o)}):(f(e,o,n),t instanceof Node||(t=c.h(s,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[u]=t.lastChild[u]=++a),e.insertBefore(t,n||null),o=t):(null!=o&&e.firstChild?n?(n.previousSibling||e.lastChild).data=t:e.firstChild.data=t:n?e.insertBefore(document.createTextNode(t),n):e.textContent=t,o=t)),o}function p(e,t){for(let t in e)c[t]=e[t];function n(){const e=s.slice.call(arguments);let n;function o(i){const l=typeof i;if(null==i);else if("string"===l)n?n.appendChild(document.createTextNode(i)):n=t?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);else if(Array.isArray(i))n||(n=document.createDocumentFragment()),i.forEach(o);else if(i instanceof Node)n?n.appendChild(i):n=i;else if("object"===l)for(let e in i)h(e,i[e],n,t);else if("function"===l)if(n){const e=n.appendChild(document.createTextNode(""));i.$t?i.$t(1,d,n,""):d(n,i,e)}else n=i.apply(null,e.splice(0));else n.appendChild(document.createTextNode(""+i))}for(;e.length;)o(e.shift());return n}return c.h=n,n}function h(e,t,n,o,i){if("o"!==e[0]||"n"!==e[1]||t.$o)if("function"==typeof t)t.$t?t.$t(2,h,n,e):c.subscribe(()=>{h(e,t(),n,o,i)});else if(i)n.style.setProperty(e,t);else if(o||"data-"===e.slice(0,5)||"aria-"===e.slice(0,5))n.setAttribute(e,t);else if("style"===e)if("string"==typeof t)n.style.cssText=t;else for(e in t)h(e,t[e],n,o,!0);else if("attrs"===e)for(e in t)h(e,t[e],n,!0);else"class"===e&&(e+="Name"),n[e]=t;else!function(e,t,n){t=t.slice(2);const o=c.cleanup(()=>e.removeEventListener(t,g));n?e.addEventListener(t,g):o(),(e.t||(e.t={}))[t]=n}(n,e,t)}function g(e){return this.t[e.type](e)}const m=p(r),b=(p(r,!0),n),v="__g",S="nextSibling";function C(e,t,n){const o=e[v];if(o)for(e=e[t];e&&e[v]!==o;)e=e[t];return n?e:e[t]}function y(e,t,n){let o;for(;t!==n;)o=t.nextSibling,e.removeChild(t),t=o}function x(e,t,n,o){let i;for(;t!==n;)i=t.nextSibling,e.insertBefore(t,o),t=i}function k(e,t){let n=-1,o=e.length;if(o>0&&e[o-1]<=t)return o-1;for(;o-n>1;){var i=(n+o)/2|0;e[i]>t?o=i:n=i}return n}let N=0;function E(e,t){const{subscribe:n,root:o,sample:i,cleanup:l}=c,r=new Map;let s=document.createDocumentFragment();const u=s.appendChild(document.createTextNode("")),f=s.appendChild(document.createTextNode(""));function a(){r.forEach(e=>e()),r.clear()}function d(e){let t=r.get(e);t&&t(),r.delete(e)}function p(e,n,i,l,c){return o(o=>{const s=function(e,t,n,o){let i;const l=typeof t;return"string"===l||"number"===l?t=document.createTextNode(t):11===t.nodeType&&(i=t.firstChild)&&i!==t.lastChild&&(i[v]=t.lastChild[v]=o),e.insertBefore(t,n||null),i||t}(e,t(n,i,l),c,++N);return r.set(s,o),s})}return l(n(t=>{t=t||[];const n=e()||[];return i(()=>(function e(t,n,o,i,l,r,c,s){const u=o.length;if(t=l.parentNode,0===u)return i.previousSibling||l.nextSibling?y(t,i.nextSibling,l):(t.textContent="",t.appendChild(i),t.appendChild(l)),c&&c(),[];if(0===n.length){for(let e=0;e<u;e++)r(t,o[e],e,o,l);return o.slice()}let f,a,d=0,p=0,h=!0,g=n.length-1,m=u-1,b=i.nextSibling,v=b,N=l.previousSibling,E=l;e:for(;h;){let e;for(h=!1,f=n[d],a=o[p];f===a;){if(d++,p++,v=b=C(b,S),g<d||m<p)break e;f=n[d],a=o[p]}for(f=n[g],a=o[m];f===a;){if(g--,m--,N=(E=C(N,"previousSibling",!0)).previousSibling,g<d||m<p)break e;f=n[g],a=o[m]}for(f=n[g],a=o[p];f===a;){h=!0;let i=C(N,"previousSibling",!0);if(e=i.previousSibling,v!==i&&(x(t,i,N.nextSibling,v),N=e),p++,--g<d||m<p)break e;f=n[g],a=o[p]}for(f=n[d],a=o[m];f===a;){if(h=!0,e=C(b,S),b!==E){let n=e.previousSibling;x(t,b,e,E),E=n,b=e}if(m--,g<++d||m<p)break e;f=n[d],a=o[m]}}if(m<p){if(d<=g){let e,n;for(;d<=g;)e=(n=C(N,"previousSibling",!0)).previousSibling,y(t,n,N.nextSibling),s&&s(n),N=e,g--}return o.slice()}if(g<d){if(p<=m)for(;p<=m;)r(t,o[p],p,o,E),p++;return o.slice()}const w=new Array(m+1-p);for(let e=p;e<=m;e++)w[e]=-1;const T=new Map;for(let e=p;e<=m;e++)T.set(o[e],e);let A=0,O=[];for(let e=d;e<=g;e++)T.has(n[e])?(w[T.get(n[e])]=e,A++):O.push(e);if(0===A)return e(t,e(t,n,[],i,l,r,c),o,i,l,r);const $=function(e,t){let n=[],o=[],i=-1,l=new Array(e.length);for(var r=t,c=e.length;r<c;r++){var s=e[r];if(!(s<0)){var u=k(n,s);-1!==u&&(l[r]=o[u]),u===i?(n[++i]=s,o[i]=r):s<n[u+1]&&(n[u+1]=s,o[u+1]=r)}}for(r=o[i];i>=0;r=l[r],i--)n[i]=r;return n}(w,p),J=[];let B=b;for(let e=d;e<=g;e++)J[e]=B,B=C(B,S);for(let e=0;e<O.length;e++){let n=J[O[e]];y(t,n,C(n,S)),s&&s(n)}let L,_=$.length-1;for(let e=m;e>=p;e--)$[_]===e?(E=J[w[$[_]]],_--):(-1===w[e]?L=r(t,o[e],e,o,E):x(t,L=J[w[e]],C(L,S),E),E=L);return o.slice()})(s,t,n,u,f,p,a,d))})),l(a),s}const w=(e,t=!1,n=Date.now())=>({id:n,title:O(b(e)),completed:O(b(t))}),T=(e=>({todos:O(b(e))}))([]),A=localStorage.getItem("todos-sinuous");function O(e){return e.toJSON=$,e}function $(){var e=this();return e&&e.toJSON&&(e=e.toJSON()),e}A&&T.todos(JSON.parse(A).todos.map(e=>w(e.title,e.completed,e.id))),o(()=>localStorage.setItem("todos-sinuous",JSON.stringify(T)));const J=27,B=13,{todos:L}=T,_=b(),D=b("all"),F=()=>L().filter(e=>e.completed()),M=()=>L().filter(e=>!e.completed()),j=()=>"all"===D()?L():"completed"===D()?F():M(),I=()=>L(L().filter(e=>!e.completed()));function q(e){const t=e.target.checked;L().filter(e=>e.completed()!==t).forEach(e=>e.completed(t))}function z({target:e,keyCode:t}){let n=e.value.trim();t===B&&n&&(L(L().concat(w(n))),e.value="")}function P(e,t){let n=e.target.value.trim();_()===t&&n&&(W({id:t,title:n}),_(null))}function W({id:e,title:t,completed:n}){const o=L().filter(t=>t.id===e)[0];t&&o.title(t),null!=n&&o.completed(n)}function G(e){var t,n="";for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const H=()=>D(location.hash.slice(2)||"all");window.addEventListener("hashchange",H),H(),document.querySelector(".todoapp").append((()=>m([m("header",{class:"header"},m("h1",null,"todos"),m("input",{class:"new-todo",placeholder:"What needs to be done?",onkeyup:z,autofocus:!0})),m("section",{class:"main",hidden:()=>!L().length},m("input",{class:"toggle-all",type:"checkbox",oninput:q,checked:()=>!M().length}),m("label",{htmlFor:"toggle-all"},"Mark all as complete"),m("ul",{class:"todo-list"},E(j,({id:e,title:t,completed:n})=>m("li",{class:()=>G({completed:n(),editing:_()===e})},m("div",{class:"view"},m("input",{class:"toggle",type:"checkbox",checked:n,oninput:t=>(function(e,t){W({id:t,completed:e.target.checked})})(t,e)}),m("label",{ondblclick:()=>_(e)},t),m("button",{class:"destroy",onclick:()=>(function(e){return L(L().filter(t=>t.id!==e))})(e)})),()=>{if(_()===e){const n=m("input",{class:"edit",value:t,onfocusout:t=>P(t,e),onkeyup:t=>(function(e,t){e.keyCode===B?P(e,t):e.keyCode===J&&_(null)})(t,e)});return setTimeout(()=>n.focus()),n}}))),m("footer",{class:"footer"},m("span",{class:"todo-count"},m("strong",null,()=>M().length),()=>1===M().length?" item":" items"," left"),m("ul",{class:"filters"},m("li",null,m("a",{class:()=>G({selected:"all"===D()}),href:"#/"},"All")),m("li",null,m("a",{class:()=>G({selected:"active"===D()}),href:"#/active"},"Active")),m("li",null,m("a",{class:()=>G({selected:"completed"===D()}),href:"#/completed"},"Completed"))),()=>F().length>0&&m("button",{class:"clear-completed",onclick:I},"Clear completed")))]))())}();
